<?php

namespace APITest\V1\Service\BomImporter;

use API\V1\Service\BomImporter;
use FabuleTest\TestCase;


class BomImporterTest extends TestCase
{
    private function runImport($file, $shouldBeConfident, $delimiter, $headers, $data) {
        $this->assertFileExists($file);

        $importer = new BomImporter();
        $importer->download($file);

        $this->assertEquals($shouldBeConfident, $importer->detectFileProperties());

        if($delimiter === null) {
            $this->setExpectedException('Exception');
        }
        $importer->process();

        $this->assertEquals($delimiter, $importer->getDelimiter());
        $this->assertEquals($headers, $importer->getHeaders());
        $this->assertEquals($data, $importer->getData());

        $importer->process();
    }

    public function testImportComma() {
        $headers = array(
                 'Qty','Value',                       'Device',                      'Package',                     'Parts',                              'Description',                                                                   'MF', 'MPN',  'OC_FARNELL','OC_NEWARK');
        $data  = array(
            array("2", "",                            "M03PTH",                      "1X03",                        "MODULE1_PWR, MODULE2_PWR",           "Header 3",                                                                      "", "", "",        ""),
            array("2", "",                            "M04PTH",                      "1X04",                        "MODULE1_SENSE, MODULE2_SENSE",       "Header 4",                                                                      "", "", "",        ""),
            array("“2”", "”0.022u\"",                 "C-USC0805",                   "C0805",                       "C12",                                "CAPACITOR, American symbol",                                                    "", "", "",        ""),
            array("1", "1.0u",                        "C-USC1210",                   "C1210",                       "C10",                                "CAPACITOR, American symbol",                                                    "", "", "",        ""),
            array("7", "100n",                        "C-EUC0603",                   "C0603-ROUND",                 "C1, C2, C6, C9, C13, C15, C22",      "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("1", "10K",                         "4R-NCAY16",                   "CAY16",                       "RN1",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown"),
            array("1", "10uF",                        "CPOL-EUSMCB",                 "SMC_B",                       "C8",                                 "POLARIZED CAPACITOR, European symbol",                                          "", "", "",        ""),
            array("1", "10x1",                        "PINHD-1X10",                  "1X10",                        "JP1",                                "PIN HEADER",                                                                    "", "", "",        ""),
            array("1", "16MHz",                       "XTAL_THRU_SMD",               "XTAL_THRU_SMT",               "X1",                                 "",                                                                              "", "", "",        ""),
            array("1", "1K",                          "4R-NCAY16",                   "CAY16",                       "RN2",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown"),
            array("1", "1M",                          "RESISTOR0805-RES",            "0805",                        "R1",                                 "Resistor",                                                                      "", "", "",        ""),
            array("2", "1u",                          "C-EUC0603",                   "C0603-ROUND",                 "C11, C14",                           "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("2", "1uF",                         "C-EUC0603",                   "C0603-ROUND",                 "C5, C7",                             "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("1", "22R",                         "4R-NCAY16",                   "CAY16",                       "RN3",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown"),
            array("2", "22p",                         "C-EUC0603",                   "C0603-ROUND",                 "C3, C4",                             "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("2", "237",                         "R-US_R0603",                  "R0603",                       "R4, R7",                             "RESISTOR, American symbol",                                                     "", "", "",        ""),
            array("1", "270m",                        "R-US_R0805",                  "R0805",                       "R9",                                 "RESISTOR, American symbol",                                                     "", "", "",        ""),
            array("1", "2x1",                         "M023.5MM",                    "SCREWTERMINAL-3.5MM-2",       "PWR_EXP",                            "Header 2",                                                                      "", "", "",        ""),
            array("1", "316K",                        "R-EU_R0603",                  "R0603-ROUND",                 "R8",                                 "RESISTOR, European symbol",                                                     "", "", "",        ""),
            array("2", "47u",                         "CAP-ELECTRO-C",               "ELECTRO-SMD-C-6MM",           "CP1, CP2",                           "Electrolytic Capacitors,Tantalum Capacitors and Super Capacitors",              "", "", "",        ""),
            array("1", "4x1",                         "M04LONGPADS",                 "1X04_LONGPADS",               "LED_EXP",                            "Header 4",                                                                      "", "", "",        ""),
            array("4", "53.6",                        "R-US_R0603",                  "R0603",                       "R2, R3, R5, R6",                     "RESISTOR, American symbol",                                                     "", "", "",        ""),
            array("1", "6x1",                         "PINHD-1X6",                   "1X06",                        "JP4",                                "PIN HEADER",                                                                    "", "", "",        ""),
            array("2", "8x1",                         "PINHD-1X8",                   "1X08",                        "JP2, JP3",                           "PIN HEADER",                                                                    "", "", "",        ""),
            array("1", "ALLEGRO_A6210",               "ALLEGRO_A6210",               "ALLEGRO_A6210",               "U4",                                 "",                                                                              "", "", "",        ""),
            array("1", "ATMEGA32U4-XUAU",             "ATMEGA32U4-XUAU",             "TQFP44-PAD",                  "U1",                                 "",                                                                              "", "", "",        ""),
            array("1", "ATMEGA32U4-XUMU",             "ATMEGA32U4-XUMU",             "QFN44ML7X7",                  "U2",                                 "",                                                                              "", "", "",        ""),
            array("1", "CD1206-S01575",               "DIODE-MINIMELF",              "MINIMELF",                    "D2",                                 "DIODE",                                                                         "", "", "",        ""),
            array("2", "COMAX_MINISWITCH",            "COMAX_MINISWITCH",            "COMAX_MINISWITCH",            "RST, RST1",                          "",                                                                              "", "", "",        ""),
            array("1", "FDN340P",                     "PMOSSOT23",                   "SOT-23",                      "T1",                                 "MOS FET",                                                                       "", "", "unknown", "unknown"),
            array("1", "GREEN",                       "LEDCHIPLED_0603",             "CHIPLED_0603",                "ON",                                 "LED",                                                                           "", "", "",        ""),
            array("6", "HANGZHOU_MULTICOLOR_3535WSA", "HANGZHOU_MULTICOLOR_3535WSA", "HANGZHOU_MULTCOLOR_3535WSZ",  "RGB1, RGB2, RGB3, RGB4, RGB5, RGB6", "",                                                                              "", "", "",        ""),
            array("1", "ICSP",                        "PINHD-2X3",                   "2X03",                        "ICSP",                               "PIN HEADER",                                                                    "", "", "",        ""),
            array("1", "LMV358MMX",                   "LMV358MMX",                   "MSOP08",                      "IC2",                                "Dual General Purpose, Low Voltage, Rail-to-Rail Output Operational Amplifiers", "", "", "",        ""),
            array("1", "LP2985-XXDBVR33",             "LP2985-XXDBVR33",             "SOT23-DBV",                   "U3",                                 "ULTRALOW-POWER 50-mA LOW-DROPOUT LINEAR REGULATORS",                            "", "", "",        ""),
            array("1", "M7",                          "DIODE-SMB",                   "SMB",                         "D1",                                 "DIODE",                                                                         "", "", "",        ""),
            array("1", "MC33269ST-3.3T3",             "MC33269ST-3.3T3",             "SOT223",                      "IC1",                                "Adjustable Output Low Dropout Voltage Regulator 800 mA",                        "", "", "",        ""),
            array("1", "MF-MSMF050-2 500mA",          "L-EUL1812",                   "L1812",                       "F1",                                 "INDUCTOR, European symbol",                                                     "", "", "",        ""),
            array("2", "MH2029-300Y",                 "WE-CBF_0805",                 "0805",                        "L1, L2",                             "SMD EMI Suppression Ferrite Beads",                                             "", "", "",        ""),
            array("1", "MOLEX_VERT_MINIUSB",          "MOLEX_VERT_MINIUSB",          "MOLEX_VERT_MINIUSB",          "J1",                                 "",                                                                              "", "", "",        ""),
            array("2", "NM",                          "R_0402_NM",                   "R0402_NM",                    "R10, R11",                           "",                                                                              "", "", "",        ""),
            array("1", "SCHOTTKY",                    "SCHOTTKY-DIODESMD",           "SMB",                         "D3",                                 "Schottky Diode",                                                                "", "", "",        ""),
            array("3", "SI2302DS_MOSFET",             "SI2302DS_MOSFET",             "SI2302DS_MOSFET",             "TBLUE, TGREEN, TRED",                "",                                                                              "", "", "",        ""),
            array("1", "TAIYO_YUDEN_6045_INDUCTOR",   "TAIYO_YUDEN_6045_INDUCTOR",   "TAIYO_YUDEN_6045_INDUCTOR",   "I_LEDDRIVER",                        "",                                                                              "", "", "",        ""),
            array("2", "VARISTORCN0603",              "VARISTORCN0603",              "CT/CN0603",                   "Z1, Z2",                             "VARISTOR",                                                                      "", "", "",        ""),
            array("1", "VERT_PWRJACK_PJ-006A_CUIINC", "VERT_PWRJACK_PJ-006A_CUIINC", "VERT_PWRJACK_PJ-006A_CUIINC", "PWR_JACK",                           "",                                                                              "", "", "",        ""),
            array("1", "XH_JST_CONN_2POS_TOP",        "XH_JST_CONN_2POS_TOP",        "XH_JST_CONN_2POS_TOP",        "2PIN_CONN",                          "",                                                                              "", "", "",        ""),
            array("1", "XH_JST_CONN_3POS_SIDE_SMT",   "XH_JST_CONN_3POS_SIDE_SMT",   "XH_JST_CONN_3POS_SIDE_SMT",   "IR_CONNECT",                         "",                                                                              "", "", "",        ""),
            array("2", "YELLOW",                      "LEDCHIPLED_0603",             "CHIPLED_0603",                "RX, TX",                             "LED",                                                                           "", "", "",        "")
        );
        $this->runImport('./APITest/V1/Service/files/comma.csv', true, ',', $headers, $data);
    }

    public function testImportSemicolon() {
        $headers = array(
                 'Qty','Value',                       'Device',                      'Package',                     'Parts',                              'Description',                                                                   'MF', 'MPN',  'OC_FARNELL','OC_NEWARK');
        $data  = array(
            array("2", "",                            "M03PTH",                      "1X03",                        "MODULE1_PWR, MODULE2_PWR",           "Header 3",                                                                      "", "", "",        ""),
            array("2", "",                            "M04PTH",                      "1X04",                        "MODULE1_SENSE, MODULE2_SENSE",       "Header 4",                                                                      "", "", "",        ""),
            array("“2”", "”0.022u\"",                 "C-USC0805",                   "C0805",                       "C12",                                "CAPACITOR, American symbol",                                                    "", "", "",        ""),
            array("1", "1.0u",                        "C-USC1210",                   "C1210",                       "C10",                                "CAPACITOR, American symbol",                                                    "", "", "",        ""),
            array("7", "100n",                        "C-EUC0603",                   "C0603-ROUND",                 "C1, C2, C6, C9, C13, C15, C22",      "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("1", "10K",                         "4R-NCAY16",                   "CAY16",                       "RN1",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown"),
            array("1", "10uF",                        "CPOL-EUSMCB",                 "SMC_B",                       "C8",                                 "POLARIZED CAPACITOR, European symbol",                                          "", "", "",        ""),
            array("1", "10x1",                        "PINHD-1X10",                  "1X10",                        "JP1",                                "PIN HEADER",                                                                    "", "", "",        ""),
            array("1", "16MHz",                       "XTAL_THRU_SMD",               "XTAL_THRU_SMT",               "X1",                                 "",                                                                              "", "", "",        ""),
            array("1", "1K",                          "4R-NCAY16",                   "CAY16",                       "RN2",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown"),
            array("1", "1M",                          "RESISTOR0805-RES",            "0805",                        "R1",                                 "Resistor",                                                                      "", "", "",        ""),
            array("2", "1u",                          "C-EUC0603",                   "C0603-ROUND",                 "C11, C14",                           "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("2", "1uF",                         "C-EUC0603",                   "C0603-ROUND",                 "C5, C7",                             "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("1", "22R",                         "4R-NCAY16",                   "CAY16",                       "RN3",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown"),
            array("2", "22p",                         "C-EUC0603",                   "C0603-ROUND",                 "C3, C4",                             "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("2", "237",                         "R-US_R0603",                  "R0603",                       "R4, R7",                             "RESISTOR, American symbol",                                                     "", "", "",        ""),
            array("1", "270m",                        "R-US_R0805",                  "R0805",                       "R9",                                 "RESISTOR, American symbol",                                                     "", "", "",        ""),
            array("1", "2x1",                         "M023.5MM",                    "SCREWTERMINAL-3.5MM-2",       "PWR_EXP",                            "Header 2",                                                                      "", "", "",        ""),
            array("1", "316K",                        "R-EU_R0603",                  "R0603-ROUND",                 "R8",                                 "RESISTOR, European symbol",                                                     "", "", "",        ""),
            array("2", "47u",                         "CAP-ELECTRO-C",               "ELECTRO-SMD-C-6MM",           "CP1, CP2",                           "Electrolytic Capacitors,Tantalum Capacitors and Super Capacitors",              "", "", "",        ""),
            array("1", "4x1",                         "M04LONGPADS",                 "1X04_LONGPADS",               "LED_EXP",                            "Header 4",                                                                      "", "", "",        ""),
            array("4", "53.6",                        "R-US_R0603",                  "R0603",                       "R2, R3, R5, R6",                     "RESISTOR, American symbol",                                                     "", "", "",        ""),
            array("1", "6x1",                         "PINHD-1X6",                   "1X06",                        "JP4",                                "PIN HEADER",                                                                    "", "", "",        ""),
            array("2", "8x1",                         "PINHD-1X8",                   "1X08",                        "JP2, JP3",                           "PIN HEADER",                                                                    "", "", "",        ""),
            array("1", "ALLEGRO_A6210",               "ALLEGRO_A6210",               "ALLEGRO_A6210",               "U4",                                 "",                                                                              "", "", "",        ""),
            array("1", "ATMEGA32U4-XUAU",             "ATMEGA32U4-XUAU",             "TQFP44-PAD",                  "U1",                                 "",                                                                              "", "", "",        ""),
            array("1", "ATMEGA32U4-XUMU",             "ATMEGA32U4-XUMU",             "QFN44ML7X7",                  "U2",                                 "",                                                                              "", "", "",        ""),
            array("1", "CD1206-S01575",               "DIODE-MINIMELF",              "MINIMELF",                    "D2",                                 "DIODE",                                                                         "", "", "",        ""),
            array("2", "COMAX_MINISWITCH",            "COMAX_MINISWITCH",            "COMAX_MINISWITCH",            "RST, RST1",                          "",                                                                              "", "", "",        ""),
            array("1", "FDN340P",                     "PMOSSOT23",                   "SOT-23",                      "T1",                                 "MOS FET",                                                                       "", "", "unknown", "unknown"),
            array("1", "GREEN",                       "LEDCHIPLED_0603",             "CHIPLED_0603",                "ON",                                 "LED",                                                                           "", "", "",        ""),
            array("6", "HANGZHOU_MULTICOLOR_3535WSA", "HANGZHOU_MULTICOLOR_3535WSA", "HANGZHOU_MULTCOLOR_3535WSZ",  "RGB1, RGB2, RGB3, RGB4, RGB5, RGB6", "",                                                                              "", "", "",        ""),
            array("1", "ICSP",                        "PINHD-2X3",                   "2X03",                        "ICSP",                               "PIN HEADER",                                                                    "", "", "",        ""),
            array("1", "LMV358MMX",                   "LMV358MMX",                   "MSOP08",                      "IC2",                                "Dual General Purpose, Low Voltage, Rail-to-Rail Output Operational Amplifiers", "", "", "",        ""),
            array("1", "LP2985-XXDBVR33",             "LP2985-XXDBVR33",             "SOT23-DBV",                   "U3",                                 "ULTRALOW-POWER 50-mA LOW-DROPOUT LINEAR REGULATORS",                            "", "", "",        ""),
            array("1", "M7",                          "DIODE-SMB",                   "SMB",                         "D1",                                 "DIODE",                                                                         "", "", "",        ""),
            array("1", "MC33269ST-3.3T3",             "MC33269ST-3.3T3",             "SOT223",                      "IC1",                                "Adjustable Output Low Dropout Voltage Regulator 800 mA",                        "", "", "",        ""),
            array("1", "MF-MSMF050-2 500mA",          "L-EUL1812",                   "L1812",                       "F1",                                 "INDUCTOR, European symbol",                                                     "", "", "",        ""),
            array("2", "MH2029-300Y",                 "WE-CBF_0805",                 "0805",                        "L1, L2",                             "SMD EMI Suppression Ferrite Beads",                                             "", "", "",        ""),
            array("1", "MOLEX_VERT_MINIUSB",          "MOLEX_VERT_MINIUSB",          "MOLEX_VERT_MINIUSB",          "J1",                                 "",                                                                              "", "", "",        ""),
            array("2", "NM",                          "R_0402_NM",                   "R0402_NM",                    "R10, R11",                           "",                                                                              "", "", "",        ""),
            array("1", "SCHOTTKY",                    "SCHOTTKY-DIODESMD",           "SMB",                         "D3",                                 "Schottky Diode",                                                                "", "", "",        ""),
            array("3", "SI2302DS_MOSFET",             "SI2302DS_MOSFET",             "SI2302DS_MOSFET",             "TBLUE, TGREEN, TRED",                "",                                                                              "", "", "",        ""),
            array("1", "TAIYO_YUDEN_6045_INDUCTOR",   "TAIYO_YUDEN_6045_INDUCTOR",   "TAIYO_YUDEN_6045_INDUCTOR",   "I_LEDDRIVER",                        "",                                                                              "", "", "",        ""),
            array("2", "VARISTORCN0603",              "VARISTORCN0603",              "CT/CN0603",                   "Z1, Z2",                             "VARISTOR",                                                                      "", "", "",        ""),
            array("1", "VERT_PWRJACK_PJ-006A_CUIINC", "VERT_PWRJACK_PJ-006A_CUIINC", "VERT_PWRJACK_PJ-006A_CUIINC", "PWR_JACK",                           "",                                                                              "", "", "",        ""),
            array("1", "XH_JST_CONN_2POS_TOP",        "XH_JST_CONN_2POS_TOP",        "XH_JST_CONN_2POS_TOP",        "2PIN_CONN",                          "",                                                                              "", "", "",        ""),
            array("1", "XH_JST_CONN_3POS_SIDE_SMT",   "XH_JST_CONN_3POS_SIDE_SMT",   "XH_JST_CONN_3POS_SIDE_SMT",   "IR_CONNECT",                         "",                                                                              "", "", "",        ""),
            array("2", "YELLOW",                      "LEDCHIPLED_0603",             "CHIPLED_0603",                "RX, TX",                             "LED",                                                                           "", "", "",        "")
        );
        $this->runImport('./APITest/V1/Service/files/semicolon.csv', true, ';', $headers, $data);
    }

    public function testImportSpace() {
        $headers = array(
                 'Qty','Value',                       'Device',                      'Package',                     'Parts',                              'Description',                                                                   'MF', 'MPN',  'OC_FARNELL','OC_NEWARK');
        $data  = array(
            array("2", "",                            "M03PTH",                      "1X03",                        "MODULE1_PWR, MODULE2_PWR",           "Header 3",                                                                      "", "", "",        ""),
            array("2", "",                            "M04PTH",                      "1X04",                        "MODULE1_SENSE, MODULE2_SENSE",       "Header 4",                                                                      "", "", "",        ""),
            array("“2”", "”0.022u\"",                 "C-USC0805",                   "C0805",                       "C12",                                "CAPACITOR, American symbol",                                                    "", "", "",        ""),
            array("1", "1.0u",                        "C-USC1210",                   "C1210",                       "C10",                                "CAPACITOR, American symbol",                                                    "", "", "",        ""),
            array("7", "100n",                        "C-EUC0603",                   "C0603-ROUND",                 "C1, C2, C6, C9, C13, C15, C22",      "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("1", "10K",                         "4R-NCAY16",                   "CAY16",                       "RN1",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown"),
            array("1", "10uF",                        "CPOL-EUSMCB",                 "SMC_B",                       "C8",                                 "POLARIZED CAPACITOR, European symbol",                                          "", "", "",        ""),
            array("1", "10x1",                        "PINHD-1X10",                  "1X10",                        "JP1",                                "PIN HEADER",                                                                    "", "", "",        ""),
            array("1", "16MHz",                       "XTAL_THRU_SMD",               "XTAL_THRU_SMT",               "X1",                                 "",                                                                              "", "", "",        ""),
            array("1", "1K",                          "4R-NCAY16",                   "CAY16",                       "RN2",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown"),
            array("1", "1M",                          "RESISTOR0805-RES",            "0805",                        "R1",                                 "Resistor",                                                                      "", "", "",        ""),
            array("2", "1u",                          "C-EUC0603",                   "C0603-ROUND",                 "C11, C14",                           "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("2", "1uF",                         "C-EUC0603",                   "C0603-ROUND",                 "C5, C7",                             "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("1", "22R",                         "4R-NCAY16",                   "CAY16",                       "RN3",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown"),
            array("2", "22p",                         "C-EUC0603",                   "C0603-ROUND",                 "C3, C4",                             "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("2", "237",                         "R-US_R0603",                  "R0603",                       "R4, R7",                             "RESISTOR, American symbol",                                                     "", "", "",        ""),
            array("1", "270m",                        "R-US_R0805",                  "R0805",                       "R9",                                 "RESISTOR, American symbol",                                                     "", "", "",        ""),
            array("1", "2x1",                         "M023.5MM",                    "SCREWTERMINAL-3.5MM-2",       "PWR_EXP",                            "Header 2",                                                                      "", "", "",        ""),
            array("1", "316K",                        "R-EU_R0603",                  "R0603-ROUND",                 "R8",                                 "RESISTOR, European symbol",                                                     "", "", "",        ""),
            array("2", "47u",                         "CAP-ELECTRO-C",               "ELECTRO-SMD-C-6MM",           "CP1, CP2",                           "Electrolytic Capacitors,Tantalum Capacitors and Super Capacitors",              "", "", "",        ""),
            array("1", "4x1",                         "M04LONGPADS",                 "1X04_LONGPADS",               "LED_EXP",                            "Header 4",                                                                      "", "", "",        ""),
            array("4", "53.6",                        "R-US_R0603",                  "R0603",                       "R2, R3, R5, R6",                     "RESISTOR, American symbol",                                                     "", "", "",        ""),
            array("1", "6x1",                         "PINHD-1X6",                   "1X06",                        "JP4",                                "PIN HEADER",                                                                    "", "", "",        ""),
            array("2", "8x1",                         "PINHD-1X8",                   "1X08",                        "JP2, JP3",                           "PIN HEADER",                                                                    "", "", "",        ""),
            array("1", "ALLEGRO_A6210",               "ALLEGRO_A6210",               "ALLEGRO_A6210",               "U4",                                 "",                                                                              "", "", "",        ""),
            array("1", "ATMEGA32U4-XUAU",             "ATMEGA32U4-XUAU",             "TQFP44-PAD",                  "U1",                                 "",                                                                              "", "", "",        ""),
            array("1", "ATMEGA32U4-XUMU",             "ATMEGA32U4-XUMU",             "QFN44ML7X7",                  "U2",                                 "",                                                                              "", "", "",        ""),
            array("1", "CD1206-S01575",               "DIODE-MINIMELF",              "MINIMELF",                    "D2",                                 "DIODE",                                                                         "", "", "",        ""),
            array("2", "COMAX_MINISWITCH",            "COMAX_MINISWITCH",            "COMAX_MINISWITCH",            "RST, RST1",                          "",                                                                              "", "", "",        ""),
            array("1", "FDN340P",                     "PMOSSOT23",                   "SOT-23",                      "T1",                                 "MOS FET",                                                                       "", "", "unknown", "unknown"),
            array("1", "GREEN",                       "LEDCHIPLED_0603",             "CHIPLED_0603",                "ON",                                 "LED",                                                                           "", "", "",        ""),
            array("6", "HANGZHOU_MULTICOLOR_3535WSA", "HANGZHOU_MULTICOLOR_3535WSA", "HANGZHOU_MULTCOLOR_3535WSZ",  "RGB1, RGB2, RGB3, RGB4, RGB5, RGB6", "",                                                                              "", "", "",        ""),
            array("1", "ICSP",                        "PINHD-2X3",                   "2X03",                        "ICSP",                               "PIN HEADER",                                                                    "", "", "",        ""),
            array("1", "LMV358MMX",                   "LMV358MMX",                   "MSOP08",                      "IC2",                                "Dual General Purpose, Low Voltage, Rail-to-Rail Output Operational Amplifiers", "", "", "",        ""),
            array("1", "LP2985-XXDBVR33",             "LP2985-XXDBVR33",             "SOT23-DBV",                   "U3",                                 "ULTRALOW-POWER 50-mA LOW-DROPOUT LINEAR REGULATORS",                            "", "", "",        ""),
            array("1", "M7",                          "DIODE-SMB",                   "SMB",                         "D1",                                 "DIODE",                                                                         "", "", "",        ""),
            array("1", "MC33269ST-3.3T3",             "MC33269ST-3.3T3",             "SOT223",                      "IC1",                                "Adjustable Output Low Dropout Voltage Regulator 800 mA",                        "", "", "",        ""),
            array("1", "MF-MSMF050-2 500mA",          "L-EUL1812",                   "L1812",                       "F1",                                 "INDUCTOR, European symbol",                                                     "", "", "",        ""),
            array("2", "MH2029-300Y",                 "WE-CBF_0805",                 "0805",                        "L1, L2",                             "SMD EMI Suppression Ferrite Beads",                                             "", "", "",        ""),
            array("1", "MOLEX_VERT_MINIUSB",          "MOLEX_VERT_MINIUSB",          "MOLEX_VERT_MINIUSB",          "J1",                                 "",                                                                              "", "", "",        ""),
            array("2", "NM",                          "R_0402_NM",                   "R0402_NM",                    "R10, R11",                           "",                                                                              "", "", "",        ""),
            array("1", "SCHOTTKY",                    "SCHOTTKY-DIODESMD",           "SMB",                         "D3",                                 "Schottky Diode",                                                                "", "", "",        ""),
            array("3", "SI2302DS_MOSFET",             "SI2302DS_MOSFET",             "SI2302DS_MOSFET",             "TBLUE, TGREEN, TRED",                "",                                                                              "", "", "",        ""),
            array("1", "TAIYO_YUDEN_6045_INDUCTOR",   "TAIYO_YUDEN_6045_INDUCTOR",   "TAIYO_YUDEN_6045_INDUCTOR",   "I_LEDDRIVER",                        "",                                                                              "", "", "",        ""),
            array("2", "VARISTORCN0603",              "VARISTORCN0603",              "CT/CN0603",                   "Z1, Z2",                             "VARISTOR",                                                                      "", "", "",        ""),
            array("1", "VERT_PWRJACK_PJ-006A_CUIINC", "VERT_PWRJACK_PJ-006A_CUIINC", "VERT_PWRJACK_PJ-006A_CUIINC", "PWR_JACK",                           "",                                                                              "", "", "",        ""),
            array("1", "XH_JST_CONN_2POS_TOP",        "XH_JST_CONN_2POS_TOP",        "XH_JST_CONN_2POS_TOP",        "2PIN_CONN",                          "",                                                                              "", "", "",        ""),
            array("1", "XH_JST_CONN_3POS_SIDE_SMT",   "XH_JST_CONN_3POS_SIDE_SMT",   "XH_JST_CONN_3POS_SIDE_SMT",   "IR_CONNECT",                         "",                                                                              "", "", "",        ""),
            array("2", "YELLOW",                      "LEDCHIPLED_0603",             "CHIPLED_0603",                "RX, TX",                             "LED",                                                                           "", "", "",        "")
        );
        $this->runImport('./APITest/V1/Service/files/space.csv', true, ' ', $headers, $data);
    }

    public function testImportTab() {
        $headers = array(
                 'Qty','Value',                       'Device',                      'Package',                     'Parts',                              'Description',                                                                   'MF', 'MPN',  'OC_FARNELL','OC_NEWARK');
        $data  = array(
            array("2", "",                            "M03PTH",                      "1X03",                        "MODULE1_PWR, MODULE2_PWR",           "Header 3",                                                                      "", "", "",        ""),
            array("2", "",                            "M04PTH",                      "1X04",                        "MODULE1_SENSE, MODULE2_SENSE",       "Header 4",                                                                      "", "", "",        ""),
            array("“2”", "”0.022u\"",                 "C-USC0805",                   "C0805",                       "C12",                                "CAPACITOR, American symbol",                                                    "", "", "",        ""),
            array("1", "1.0u",                        "C-USC1210",                   "C1210",                       "C10",                                "CAPACITOR, American symbol",                                                    "", "", "",        ""),
            array("7", "100n",                        "C-EUC0603",                   "C0603-ROUND",                 "C1, C2, C6, C9, C13, C15, C22",      "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("1", "10K",                         "4R-NCAY16",                   "CAY16",                       "RN1",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown"),
            array("1", "10uF",                        "CPOL-EUSMCB",                 "SMC_B",                       "C8",                                 "POLARIZED CAPACITOR, European symbol",                                          "", "", "",        ""),
            array("1", "10x1",                        "PINHD-1X10",                  "1X10",                        "JP1",                                "PIN HEADER",                                                                    "", "", "",        ""),
            array("1", "16MHz",                       "XTAL_THRU_SMD",               "XTAL_THRU_SMT",               "X1",                                 "",                                                                              "", "", "",        ""),
            array("1", "1K",                          "4R-NCAY16",                   "CAY16",                       "RN2",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown"),
            array("1", "1M",                          "RESISTOR0805-RES",            "0805",                        "R1",                                 "Resistor",                                                                      "", "", "",        ""),
            array("2", "1u",                          "C-EUC0603",                   "C0603-ROUND",                 "C11, C14",                           "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("2", "1uF",                         "C-EUC0603",                   "C0603-ROUND",                 "C5, C7",                             "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("1", "22R",                         "4R-NCAY16",                   "CAY16",                       "RN3",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown"),
            array("2", "22p",                         "C-EUC0603",                   "C0603-ROUND",                 "C3, C4",                             "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("2", "237",                         "R-US_R0603",                  "R0603",                       "R4, R7",                             "RESISTOR, American symbol",                                                     "", "", "",        ""),
            array("1", "270m",                        "R-US_R0805",                  "R0805",                       "R9",                                 "RESISTOR, American symbol",                                                     "", "", "",        ""),
            array("1", "2x1",                         "M023.5MM",                    "SCREWTERMINAL-3.5MM-2",       "PWR_EXP",                            "Header 2",                                                                      "", "", "",        ""),
            array("1", "316K",                        "R-EU_R0603",                  "R0603-ROUND",                 "R8",                                 "RESISTOR, European symbol",                                                     "", "", "",        ""),
            array("2", "47u",                         "CAP-ELECTRO-C",               "ELECTRO-SMD-C-6MM",           "CP1, CP2",                           "Electrolytic Capacitors,Tantalum Capacitors and Super Capacitors",              "", "", "",        ""),
            array("1", "4x1",                         "M04LONGPADS",                 "1X04_LONGPADS",               "LED_EXP",                            "Header 4",                                                                      "", "", "",        ""),
            array("4", "53.6",                        "R-US_R0603",                  "R0603",                       "R2, R3, R5, R6",                     "RESISTOR, American symbol",                                                     "", "", "",        ""),
            array("1", "6x1",                         "PINHD-1X6",                   "1X06",                        "JP4",                                "PIN HEADER",                                                                    "", "", "",        ""),
            array("2", "8x1",                         "PINHD-1X8",                   "1X08",                        "JP2, JP3",                           "PIN HEADER",                                                                    "", "", "",        ""),
            array("1", "ALLEGRO_A6210",               "ALLEGRO_A6210",               "ALLEGRO_A6210",               "U4",                                 "",                                                                              "", "", "",        ""),
            array("1", "ATMEGA32U4-XUAU",             "ATMEGA32U4-XUAU",             "TQFP44-PAD",                  "U1",                                 "",                                                                              "", "", "",        ""),
            array("1", "ATMEGA32U4-XUMU",             "ATMEGA32U4-XUMU",             "QFN44ML7X7",                  "U2",                                 "",                                                                              "", "", "",        ""),
            array("1", "CD1206-S01575",               "DIODE-MINIMELF",              "MINIMELF",                    "D2",                                 "DIODE",                                                                         "", "", "",        ""),
            array("2", "COMAX_MINISWITCH",            "COMAX_MINISWITCH",            "COMAX_MINISWITCH",            "RST, RST1",                          "",                                                                              "", "", "",        ""),
            array("1", "FDN340P",                     "PMOSSOT23",                   "SOT-23",                      "T1",                                 "MOS FET",                                                                       "", "", "unknown", "unknown"),
            array("1", "GREEN",                       "LEDCHIPLED_0603",             "CHIPLED_0603",                "ON",                                 "LED",                                                                           "", "", "",        ""),
            array("6", "HANGZHOU_MULTICOLOR_3535WSA", "HANGZHOU_MULTICOLOR_3535WSA", "HANGZHOU_MULTCOLOR_3535WSZ",  "RGB1, RGB2, RGB3, RGB4, RGB5, RGB6", "",                                                                              "", "", "",        ""),
            array("1", "ICSP",                        "PINHD-2X3",                   "2X03",                        "ICSP",                               "PIN HEADER",                                                                    "", "", "",        ""),
            array("1", "LMV358MMX",                   "LMV358MMX",                   "MSOP08",                      "IC2",                                "Dual General Purpose, Low Voltage, Rail-to-Rail Output Operational Amplifiers", "", "", "",        ""),
            array("1", "LP2985-XXDBVR33",             "LP2985-XXDBVR33",             "SOT23-DBV",                   "U3",                                 "ULTRALOW-POWER 50-mA LOW-DROPOUT LINEAR REGULATORS",                            "", "", "",        ""),
            array("1", "M7",                          "DIODE-SMB",                   "SMB",                         "D1",                                 "DIODE",                                                                         "", "", "",        ""),
            array("1", "MC33269ST-3.3T3",             "MC33269ST-3.3T3",             "SOT223",                      "IC1",                                "Adjustable Output Low Dropout Voltage Regulator 800 mA",                        "", "", "",        ""),
            array("1", "MF-MSMF050-2 500mA",          "L-EUL1812",                   "L1812",                       "F1",                                 "INDUCTOR, European symbol",                                                     "", "", "",        ""),
            array("2", "MH2029-300Y",                 "WE-CBF_0805",                 "0805",                        "L1, L2",                             "SMD EMI Suppression Ferrite Beads",                                             "", "", "",        ""),
            array("1", "MOLEX_VERT_MINIUSB",          "MOLEX_VERT_MINIUSB",          "MOLEX_VERT_MINIUSB",          "J1",                                 "",                                                                              "", "", "",        ""),
            array("2", "NM",                          "R_0402_NM",                   "R0402_NM",                    "R10, R11",                           "",                                                                              "", "", "",        ""),
            array("1", "SCHOTTKY",                    "SCHOTTKY-DIODESMD",           "SMB",                         "D3",                                 "Schottky Diode",                                                                "", "", "",        ""),
            array("3", "SI2302DS_MOSFET",             "SI2302DS_MOSFET",             "SI2302DS_MOSFET",             "TBLUE, TGREEN, TRED",                "",                                                                              "", "", "",        ""),
            array("1", "TAIYO_YUDEN_6045_INDUCTOR",   "TAIYO_YUDEN_6045_INDUCTOR",   "TAIYO_YUDEN_6045_INDUCTOR",   "I_LEDDRIVER",                        "",                                                                              "", "", "",        ""),
            array("2", "VARISTORCN0603",              "VARISTORCN0603",              "CT/CN0603",                   "Z1, Z2",                             "VARISTOR",                                                                      "", "", "",        ""),
            array("1", "VERT_PWRJACK_PJ-006A_CUIINC", "VERT_PWRJACK_PJ-006A_CUIINC", "VERT_PWRJACK_PJ-006A_CUIINC", "PWR_JACK",                           "",                                                                              "", "", "",        ""),
            array("1", "XH_JST_CONN_2POS_TOP",        "XH_JST_CONN_2POS_TOP",        "XH_JST_CONN_2POS_TOP",        "2PIN_CONN",                          "",                                                                              "", "", "",        ""),
            array("1", "XH_JST_CONN_3POS_SIDE_SMT",   "XH_JST_CONN_3POS_SIDE_SMT",   "XH_JST_CONN_3POS_SIDE_SMT",   "IR_CONNECT",                         "",                                                                              "", "", "",        ""),
            array("2", "YELLOW",                      "LEDCHIPLED_0603",             "CHIPLED_0603",                "RX, TX",                             "LED",                                                                           "", "", "",        "")
        );
        $this->runImport('./APITest/V1/Service/files/tab.csv', true, "\t", $headers, $data);
    }

    public function testImportDash() {
        $headers = array(
                 'Qty','Value',                       'Device',                      'Package',                     'Parts',                              'Description',                                                                   'MF', 'MPN',  'OC_FARNELL','OC_NEWARK');
        $data  = array(
            array("2", "",                            "M03PTH",                      "1X03",                        "MODULE1_PWR, MODULE2_PWR",           "Header 3",                                                                      "", "", "",        ""),
            array("2", "",                            "M04PTH",                      "1X04",                        "MODULE1_SENSE, MODULE2_SENSE",       "Header 4",                                                                      "", "", "",        ""),
            array("“2”", "”0.022u\"",                 "C-USC0805",                   "C0805",                       "C12",                                "CAPACITOR, American symbol",                                                    "", "", "",        ""),
            array("1", "1.0u",                        "C-USC1210",                   "C1210",                       "C10",                                "CAPACITOR, American symbol",                                                    "", "", "",        ""),
            array("7", "100n",                        "C-EUC0603",                   "C0603-ROUND",                 "C1, C2, C6, C9, C13, C15, C22",      "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("1", "10K",                         "4R-NCAY16",                   "CAY16",                       "RN1",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown"),
            array("1", "10uF",                        "CPOL-EUSMCB",                 "SMC_B",                       "C8",                                 "POLARIZED CAPACITOR, European symbol",                                          "", "", "",        ""),
            array("1", "10x1",                        "PINHD-1X10",                  "1X10",                        "JP1",                                "PIN HEADER",                                                                    "", "", "",        ""),
            array("1", "16MHz",                       "XTAL_THRU_SMD",               "XTAL_THRU_SMT",               "X1",                                 "",                                                                              "", "", "",        ""),
            array("1", "1K",                          "4R-NCAY16",                   "CAY16",                       "RN2",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown"),
            array("1", "1M",                          "RESISTOR0805-RES",            "0805",                        "R1",                                 "Resistor",                                                                      "", "", "",        ""),
            array("2", "1u",                          "C-EUC0603",                   "C0603-ROUND",                 "C11, C14",                           "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("2", "1uF",                         "C-EUC0603",                   "C0603-ROUND",                 "C5, C7",                             "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("1", "22R",                         "4R-NCAY16",                   "CAY16",                       "RN3",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown"),
            array("2", "22p",                         "C-EUC0603",                   "C0603-ROUND",                 "C3, C4",                             "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("2", "237",                         "R-US_R0603",                  "R0603",                       "R4, R7",                             "RESISTOR, American symbol",                                                     "", "", "",        ""),
            array("1", "270m",                        "R-US_R0805",                  "R0805",                       "R9",                                 "RESISTOR, American symbol",                                                     "", "", "",        ""),
            array("1", "2x1",                         "M023.5MM",                    "SCREWTERMINAL-3.5MM-2",       "PWR_EXP",                            "Header 2",                                                                      "", "", "",        ""),
            array("1", "316K",                        "R-EU_R0603",                  "R0603-ROUND",                 "R8",                                 "RESISTOR, European symbol",                                                     "", "", "",        ""),
            array("2", "47u",                         "CAP-ELECTRO-C",               "ELECTRO-SMD-C-6MM",           "CP1, CP2",                           "Electrolytic Capacitors,Tantalum Capacitors and Super Capacitors",              "", "", "",        ""),
            array("1", "4x1",                         "M04LONGPADS",                 "1X04_LONGPADS",               "LED_EXP",                            "Header 4",                                                                      "", "", "",        ""),
            array("4", "53.6",                        "R-US_R0603",                  "R0603",                       "R2, R3, R5, R6",                     "RESISTOR, American symbol",                                                     "", "", "",        ""),
            array("1", "6x1",                         "PINHD-1X6",                   "1X06",                        "JP4",                                "PIN HEADER",                                                                    "", "", "",        ""),
            array("2", "8x1",                         "PINHD-1X8",                   "1X08",                        "JP2, JP3",                           "PIN HEADER",                                                                    "", "", "",        ""),
            array("1", "ALLEGRO_A6210",               "ALLEGRO_A6210",               "ALLEGRO_A6210",               "U4",                                 "",                                                                              "", "", "",        ""),
            array("1", "ATMEGA32U4-XUAU",             "ATMEGA32U4-XUAU",             "TQFP44-PAD",                  "U1",                                 "",                                                                              "", "", "",        ""),
            array("1", "ATMEGA32U4-XUMU",             "ATMEGA32U4-XUMU",             "QFN44ML7X7",                  "U2",                                 "",                                                                              "", "", "",        ""),
            array("1", "CD1206-S01575",               "DIODE-MINIMELF",              "MINIMELF",                    "D2",                                 "DIODE",                                                                         "", "", "",        ""),
            array("2", "COMAX_MINISWITCH",            "COMAX_MINISWITCH",            "COMAX_MINISWITCH",            "RST, RST1",                          "",                                                                              "", "", "",        ""),
            array("1", "FDN340P",                     "PMOSSOT23",                   "SOT-23",                      "T1",                                 "MOS FET",                                                                       "", "", "unknown", "unknown"),
            array("1", "GREEN",                       "LEDCHIPLED_0603",             "CHIPLED_0603",                "ON",                                 "LED",                                                                           "", "", "",        ""),
            array("6", "HANGZHOU_MULTICOLOR_3535WSA", "HANGZHOU_MULTICOLOR_3535WSA", "HANGZHOU_MULTCOLOR_3535WSZ",  "RGB1, RGB2, RGB3, RGB4, RGB5, RGB6", "",                                                                              "", "", "",        ""),
            array("1", "ICSP",                        "PINHD-2X3",                   "2X03",                        "ICSP",                               "PIN HEADER",                                                                    "", "", "",        ""),
            array("1", "LMV358MMX",                   "LMV358MMX",                   "MSOP08",                      "IC2",                                "Dual General Purpose, Low Voltage, Rail-to-Rail Output Operational Amplifiers", "", "", "",        ""),
            array("1", "LP2985-XXDBVR33",             "LP2985-XXDBVR33",             "SOT23-DBV",                   "U3",                                 "ULTRALOW-POWER 50-mA LOW-DROPOUT LINEAR REGULATORS",                            "", "", "",        ""),
            array("1", "M7",                          "DIODE-SMB",                   "SMB",                         "D1",                                 "DIODE",                                                                         "", "", "",        ""),
            array("1", "MC33269ST-3.3T3",             "MC33269ST-3.3T3",             "SOT223",                      "IC1",                                "Adjustable Output Low Dropout Voltage Regulator 800 mA",                        "", "", "",        ""),
            array("1", "MF-MSMF050-2 500mA",          "L-EUL1812",                   "L1812",                       "F1",                                 "INDUCTOR, European symbol",                                                     "", "", "",        ""),
            array("2", "MH2029-300Y",                 "WE-CBF_0805",                 "0805",                        "L1, L2",                             "SMD EMI Suppression Ferrite Beads",                                             "", "", "",        ""),
            array("1", "MOLEX_VERT_MINIUSB",          "MOLEX_VERT_MINIUSB",          "MOLEX_VERT_MINIUSB",          "J1",                                 "",                                                                              "", "", "",        ""),
            array("2", "NM",                          "R_0402_NM",                   "R0402_NM",                    "R10, R11",                           "",                                                                              "", "", "",        ""),
            array("1", "SCHOTTKY",                    "SCHOTTKY-DIODESMD",           "SMB",                         "D3",                                 "Schottky Diode",                                                                "", "", "",        ""),
            array("3", "SI2302DS_MOSFET",             "SI2302DS_MOSFET",             "SI2302DS_MOSFET",             "TBLUE, TGREEN, TRED",                "",                                                                              "", "", "",        ""),
            array("1", "TAIYO_YUDEN_6045_INDUCTOR",   "TAIYO_YUDEN_6045_INDUCTOR",   "TAIYO_YUDEN_6045_INDUCTOR",   "I_LEDDRIVER",                        "",                                                                              "", "", "",        ""),
            array("2", "VARISTORCN0603",              "VARISTORCN0603",              "CT/CN0603",                   "Z1, Z2",                             "VARISTOR",                                                                      "", "", "",        ""),
            array("1", "VERT_PWRJACK_PJ-006A_CUIINC", "VERT_PWRJACK_PJ-006A_CUIINC", "VERT_PWRJACK_PJ-006A_CUIINC", "PWR_JACK",                           "",                                                                              "", "", "",        ""),
            array("1", "XH_JST_CONN_2POS_TOP",        "XH_JST_CONN_2POS_TOP",        "XH_JST_CONN_2POS_TOP",        "2PIN_CONN",                          "",                                                                              "", "", "",        ""),
            array("1", "XH_JST_CONN_3POS_SIDE_SMT",   "XH_JST_CONN_3POS_SIDE_SMT",   "XH_JST_CONN_3POS_SIDE_SMT",   "IR_CONNECT",                         "",                                                                              "", "", "",        ""),
            array("2", "YELLOW",                      "LEDCHIPLED_0603",             "CHIPLED_0603",                "RX, TX",                             "LED",                                                                           "", "", "",        "")
        );
        $this->runImport('./APITest/V1/Service/files/dash.csv', true, '-', $headers, $data);
    }

    public function testImportPipe() {
        $headers = array(
                 'Qty','Value',                       'Device',                      'Package',                     'Parts',                              'Description',                                                                   'MF', 'MPN',  'OC_FARNELL','OC_NEWARK');
        $data  = array(
            array("2", "",                            "M03PTH",                      "1X03",                        "MODULE1_PWR, MODULE2_PWR",           "Header 3",                                                                      "", "", "",        ""),
            array("2", "",                            "M04PTH",                      "1X04",                        "MODULE1_SENSE, MODULE2_SENSE",       "Header 4",                                                                      "", "", "",        ""),
            array("“2”", "”0.022u\"",                 "C-USC0805",                   "C0805",                       "C12",                                "CAPACITOR, American symbol",                                                    "", "", "",        ""),
            array("1", "1.0u",                        "C-USC1210",                   "C1210",                       "C10",                                "CAPACITOR, American symbol",                                                    "", "", "",        ""),
            array("7", "100n",                        "C-EUC0603",                   "C0603-ROUND",                 "C1, C2, C6, C9, C13, C15, C22",      "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("1", "10K",                         "4R-NCAY16",                   "CAY16",                       "RN1",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown"),
            array("1", "10uF",                        "CPOL-EUSMCB",                 "SMC_B",                       "C8",                                 "POLARIZED CAPACITOR, European symbol",                                          "", "", "",        ""),
            array("1", "10x1",                        "PINHD-1X10",                  "1X10",                        "JP1",                                "PIN HEADER",                                                                    "", "", "",        ""),
            array("1", "16MHz",                       "XTAL_THRU_SMD",               "XTAL_THRU_SMT",               "X1",                                 "",                                                                              "", "", "",        ""),
            array("1", "1K",                          "4R-NCAY16",                   "CAY16",                       "RN2",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown"),
            array("1", "1M",                          "RESISTOR0805-RES",            "0805",                        "R1",                                 "Resistor",                                                                      "", "", "",        ""),
            array("2", "1u",                          "C-EUC0603",                   "C0603-ROUND",                 "C11, C14",                           "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("2", "1uF",                         "C-EUC0603",                   "C0603-ROUND",                 "C5, C7",                             "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("1", "22R",                         "4R-NCAY16",                   "CAY16",                       "RN3",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown"),
            array("2", "22p",                         "C-EUC0603",                   "C0603-ROUND",                 "C3, C4",                             "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("2", "237",                         "R-US_R0603",                  "R0603",                       "R4, R7",                             "RESISTOR, American symbol",                                                     "", "", "",        ""),
            array("1", "270m",                        "R-US_R0805",                  "R0805",                       "R9",                                 "RESISTOR, American symbol",                                                     "", "", "",        ""),
            array("1", "2x1",                         "M023.5MM",                    "SCREWTERMINAL-3.5MM-2",       "PWR_EXP",                            "Header 2",                                                                      "", "", "",        ""),
            array("1", "316K",                        "R-EU_R0603",                  "R0603-ROUND",                 "R8",                                 "RESISTOR, European symbol",                                                     "", "", "",        ""),
            array("2", "47u",                         "CAP-ELECTRO-C",               "ELECTRO-SMD-C-6MM",           "CP1, CP2",                           "Electrolytic Capacitors,Tantalum Capacitors and Super Capacitors",              "", "", "",        ""),
            array("1", "4x1",                         "M04LONGPADS",                 "1X04_LONGPADS",               "LED_EXP",                            "Header 4",                                                                      "", "", "",        ""),
            array("4", "53.6",                        "R-US_R0603",                  "R0603",                       "R2, R3, R5, R6",                     "RESISTOR, American symbol",                                                     "", "", "",        ""),
            array("1", "6x1",                         "PINHD-1X6",                   "1X06",                        "JP4",                                "PIN HEADER",                                                                    "", "", "",        ""),
            array("2", "8x1",                         "PINHD-1X8",                   "1X08",                        "JP2, JP3",                           "PIN HEADER",                                                                    "", "", "",        ""),
            array("1", "ALLEGRO_A6210",               "ALLEGRO_A6210",               "ALLEGRO_A6210",               "U4",                                 "",                                                                              "", "", "",        ""),
            array("1", "ATMEGA32U4-XUAU",             "ATMEGA32U4-XUAU",             "TQFP44-PAD",                  "U1",                                 "",                                                                              "", "", "",        ""),
            array("1", "ATMEGA32U4-XUMU",             "ATMEGA32U4-XUMU",             "QFN44ML7X7",                  "U2",                                 "",                                                                              "", "", "",        ""),
            array("1", "CD1206-S01575",               "DIODE-MINIMELF",              "MINIMELF",                    "D2",                                 "DIODE",                                                                         "", "", "",        ""),
            array("2", "COMAX_MINISWITCH",            "COMAX_MINISWITCH",            "COMAX_MINISWITCH",            "RST, RST1",                          "",                                                                              "", "", "",        ""),
            array("1", "FDN340P",                     "PMOSSOT23",                   "SOT-23",                      "T1",                                 "MOS FET",                                                                       "", "", "unknown", "unknown"),
            array("1", "GREEN",                       "LEDCHIPLED_0603",             "CHIPLED_0603",                "ON",                                 "LED",                                                                           "", "", "",        ""),
            array("6", "HANGZHOU_MULTICOLOR_3535WSA", "HANGZHOU_MULTICOLOR_3535WSA", "HANGZHOU_MULTCOLOR_3535WSZ",  "RGB1, RGB2, RGB3, RGB4, RGB5, RGB6", "",                                                                              "", "", "",        ""),
            array("1", "ICSP",                        "PINHD-2X3",                   "2X03",                        "ICSP",                               "PIN HEADER",                                                                    "", "", "",        ""),
            array("1", "LMV358MMX",                   "LMV358MMX",                   "MSOP08",                      "IC2",                                "Dual General Purpose, Low Voltage, Rail-to-Rail Output Operational Amplifiers", "", "", "",        ""),
            array("1", "LP2985-XXDBVR33",             "LP2985-XXDBVR33",             "SOT23-DBV",                   "U3",                                 "ULTRALOW-POWER 50-mA LOW-DROPOUT LINEAR REGULATORS",                            "", "", "",        ""),
            array("1", "M7",                          "DIODE-SMB",                   "SMB",                         "D1",                                 "DIODE",                                                                         "", "", "",        ""),
            array("1", "MC33269ST-3.3T3",             "MC33269ST-3.3T3",             "SOT223",                      "IC1",                                "Adjustable Output Low Dropout Voltage Regulator 800 mA",                        "", "", "",        ""),
            array("1", "MF-MSMF050-2 500mA",          "L-EUL1812",                   "L1812",                       "F1",                                 "INDUCTOR, European symbol",                                                     "", "", "",        ""),
            array("2", "MH2029-300Y",                 "WE-CBF_0805",                 "0805",                        "L1, L2",                             "SMD EMI Suppression Ferrite Beads",                                             "", "", "",        ""),
            array("1", "MOLEX_VERT_MINIUSB",          "MOLEX_VERT_MINIUSB",          "MOLEX_VERT_MINIUSB",          "J1",                                 "",                                                                              "", "", "",        ""),
            array("2", "NM",                          "R_0402_NM",                   "R0402_NM",                    "R10, R11",                           "",                                                                              "", "", "",        ""),
            array("1", "SCHOTTKY",                    "SCHOTTKY-DIODESMD",           "SMB",                         "D3",                                 "Schottky Diode",                                                                "", "", "",        ""),
            array("3", "SI2302DS_MOSFET",             "SI2302DS_MOSFET",             "SI2302DS_MOSFET",             "TBLUE, TGREEN, TRED",                "",                                                                              "", "", "",        ""),
            array("1", "TAIYO_YUDEN_6045_INDUCTOR",   "TAIYO_YUDEN_6045_INDUCTOR",   "TAIYO_YUDEN_6045_INDUCTOR",   "I_LEDDRIVER",                        "",                                                                              "", "", "",        ""),
            array("2", "VARISTORCN0603",              "VARISTORCN0603",              "CT/CN0603",                   "Z1, Z2",                             "VARISTOR",                                                                      "", "", "",        ""),
            array("1", "VERT_PWRJACK_PJ-006A_CUIINC", "VERT_PWRJACK_PJ-006A_CUIINC", "VERT_PWRJACK_PJ-006A_CUIINC", "PWR_JACK",                           "",                                                                              "", "", "",        ""),
            array("1", "XH_JST_CONN_2POS_TOP",        "XH_JST_CONN_2POS_TOP",        "XH_JST_CONN_2POS_TOP",        "2PIN_CONN",                          "",                                                                              "", "", "",        ""),
            array("1", "XH_JST_CONN_3POS_SIDE_SMT",   "XH_JST_CONN_3POS_SIDE_SMT",   "XH_JST_CONN_3POS_SIDE_SMT",   "IR_CONNECT",                         "",                                                                              "", "", "",        ""),
            array("2", "YELLOW",                      "LEDCHIPLED_0603",             "CHIPLED_0603",                "RX, TX",                             "LED",                                                                           "", "", "",        ""),
            array("",  "",                            "",                            "",                            "",                                   "",                                                                              "", "", "",        "")
        );
        $this->runImport('./APITest/V1/Service/files/pipe.csv', true, '|', $headers, $data);
    }

    public function testImportOther() {
        $headers = array();
        $data  = array();
        $this->runImport('./APITest/V1/Service/files/other.csv', true, null, $headers, $data);
    }

    public function testImportMalformed() {
        $headers = array(
                 'Qty','Value',                       'Device',                      'Package',                     'Parts',                              'Description',                                                                   'MF', 'MPN',  'OC_FARNELL','OC_NEWARK');
        $data  = array(
            array("2", "",                            "M03PTH",                      "1X03",                        "MODULE1_PWR, MODULE2_PWR",           "Header 3",                                                                      "", "", "",        ""),
            array("2", "",                            "M04PTH",                      "1X04",                        "MODULE1_SENSE, MODULE2_SENSE",       "Header 4",                                                                      "", "", "",        ""),
            array("“2”", "”0.022u\"",                 "C-USC0805",                   "C0805",                       "C12",                                "CAPACITOR, American symbol",                                                    "", "", "",        ""),
            array("1", "1.0u",                        "C-USC1210",                   "C1210",                       "C10",                                "CAPACITOR, American symbol",                                                    "", "", "",        ""),
            array("7", "100n",                        "C-EUC0603",                   "C0603-ROUND",                 "C1, C2, C6, C9, C13, C15, C22",      "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("1", "10K",                         "4R-NCAY16",                   "CAY16",                       "RN1",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown"),
            array("1", "10uF",                        "CPOL-EUSMCB",                 "SMC_B",                       "C8",                                 "POLARIZED CAPACITOR, European symbol",                                          "", "", "",        ""),
            array("1", "10x1",                        "PINHD-1X10",                  "1X10",                        "JP1",                                "PIN HEADER",                                                                    "", "", "",        ""),
            array("1", "16MHz",                       "XTAL_THRU_SMD",               "XTAL_THRU_SMT",               "X1",                                 "",                                                                              "", "", "",        ""),
            array("1", "1K",                          "4R-NCAY16",                   "CAY16",                       "RN2",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown"),
            array("R1", "Resistor",                   "",                            "",                            "",                                   "",                                                                              "", "", "",        ""),
            array("2", "1u",                          "C-EUC0603",                   "C0603-ROUND",                 "C11, C14",                           "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("2", "1uF",                         "C-EUC0603",                   "C0603-ROUND",                 "C5, C7",                             "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("1", "22R",                         "4R-NCAY16",                   "CAY16",                       "RN3",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown"),
            array("2", "22p",                         "C-EUC0603",                   "C0603-ROUND",                 "C3, C4",                             "CAPACITOR, European symbol",                                                    "", "", "",        ""),
            array("2", "237",                         "R-US_R0603",                  "R0603",                       "R4, R7",                             "RESISTOR, American symbol",                                                     "", "", "",        ""),
            array("1", "270m",                        "R-US_R0805",                  "R0805",                       "R9",                                 "RESISTOR, American symbol",                                                     "", "", "",        ""),
            array("1", "2x1",                         "M023.5MM",                    "SCREWTERMINAL-3.5MM-2",       "PWR_EXP",                            "Header 2",                                                                      "", "", "",        ""),
            array("1", "316K",                        "R-EU_R0603",                  "R0603-ROUND",                 "R8",                                 "RESISTOR, European symbol",                                                     "", "", "",        ""),
            array("2", "47u",                         "CAP-ELECTRO-C",               "ELECTRO-SMD-C-6MM",           "CP1, CP2",                           "Electrolytic Capacitors,Tantalum Capacitors and Super Capacitors",              "", "", "",        ""),
            array("1", "4x1",                         "M04LONGPADS",                 "1X04_LONGPADS",               "LED_EXP",                            "Header 4",                                                                      "", "", "",        ""),
            array("4", "53.6",                        "R-US_R0603",                  "R0603",                       "R2, R3, R5, R6",                     "RESISTOR, American symbol",                                                     "", "", "",        ""),
            array("1", "6x1",                         "PINHD-1X6",                   "1X06",                        "JP4",                                "PIN HEADER",                                                                    "", "", "",        ""),
            array("2", "8x1",                         "PINHD-1X8",                   "1X08",                        "JP2, JP3",                           "PIN HEADER",                                                                    "", "", "",        ""),
            array("1", "ALLEGRO_A6210",               "ALLEGRO_A6210",               "ALLEGRO_A6210",               "U4",                                 "",                                                                              "", "", "",        ""),
            array("1", "ATMEGA32U4-XUAU",             "ATMEGA32U4-XUAU",             "TQFP44-PAD",                  "U1",                                 "",                                                                              "", "", "",        ""),
            array("1", "ATMEGA32U4-XUMU",             "QFN44ML7X7",                  "U2",                          "",                                   "",                                                                              "", "", "",        ""),
            array("1", "CD1206-S01575",               "DIODE-MINIMELF",              "MINIMELF",                    "D2",                                 "DIODE",                                                                         "", "", "",        ""),
            array("2", "COMAX_MINISWITCH",            "COMAX_MINISWITCH",            "COMAX_MINISWITCH",            "RST, RST1",                          "",                                                                              "", "", "",        ""),
            array("1", "FDN340P",                     "PMOSSOT23",                   "SOT-23",                      "T1",                                 "MOS FET",                                                                       "", "", "unknown", "unknown"),
            array("1", "GREEN",                       "LEDCHIPLED_0603",             "CHIPLED_0603",                "ON",                                 "LED",                                                                           "", "", "",        ""),
            array("6", "HANGZHOU_MULTICOLOR_3535WSA", "HANGZHOU_MULTICOLOR_3535WSA", "HANGZHOU_MULTCOLOR_3535WSZ",  "RGB1, RGB2, RGB3, RGB4, RGB5, RGB6", "",                                                                              "", "", "",        ""),
            array("1", "ICSP",                        "PINHD-2X3",                   "2X03",                        "ICSP",                               "PIN HEADER",                                                                    "", "", "",        ""),
            array("1", "LMV358MMX",                   "LMV358MMX",                   "MSOP08",                      "IC2",                                "Dual General Purpose, Low Voltage, Rail-to-Rail Output Operational Amplifiers", "", "", "",        ""),
            array("1", "LP2985-XXDBVR33",             "LP2985-XXDBVR33",             "SOT23-DBV",                   "U3",                                 "ULTRALOW-POWER 50-mA LOW-DROPOUT LINEAR REGULATORS",                            "", "", "",        ""),
            array("1", "M7",                          "DIODE-SMB",                   "SMB",                         "D1",                                 "DIODE",                                                                         "", "", "",        ""),
            array("1", "MC33269ST-3.3T3",             "MC33269ST-3.3T3",             "SOT223",                      "IC1",                                "Adjustable Output Low Dropout Voltage Regulator 800 mA",                        "", "", "",        ""),
            array("1", "MF-MSMF050-2 500mA",          "L-EUL1812",                   "L1812",                       "F1",                                 "INDUCTOR, European symbol",                                                     "", "", "",        ""),
            array("2", "MH2029-300Y",                 "WE-CBF_0805",                 "0805",                        "L1, L2",                             "SMD EMI Suppression Ferrite Beads",                                             "", "", "",        ""),
            array("1", "MOLEX_VERT_MINIUSB",          "MOLEX_VERT_MINIUSB",          "MOLEX_VERT_MINIUSB",          "J1",                                 "",                                                                              "", "", "",        ""),
            array("2", "NM",                          "R_0402_NM",                   "R0402_NM",                    "R10, R11",                           "",                                                                              "", "", "",        ""),
            array("1", "SCHOTTKY",                    "SCHOTTKY-DIODESMD",           "SMB",                         "D3",                                 "Schottky Diode",                                                                "", "", "",        ""),
            array("3", "SI2302DS_MOSFET",             "SI2302DS_MOSFET",             "SI2302DS_MOSFET",             "TBLUE, TGREEN, TRED",                "",                                                                              "", "", "",        ""),
            array("1", "TAIYO_YUDEN_6045_INDUCTOR",   "TAIYO_YUDEN_6045_INDUCTOR",   "TAIYO_YUDEN_6045_INDUCTOR",   "I_LEDDRIVER",                        "",                                                                              "", "", "",        ""),
            array("CT/CN0603", "Z1, Z2",              "VARISTOR",                    "",                            "",                                   "",                                                                              "", "", "",        ""),
            array("1", "VERT_PWRJACK_PJ-006A_CUIINC", "VERT_PWRJACK_PJ-006A_CUIINC", "VERT_PWRJACK_PJ-006A_CUIINC", "PWR_JACK",                           "",                                                                              "", "", "",        ""),
            array("1", "XH_JST_CONN_2POS_TOP",        "XH_JST_CONN_2POS_TOP",        "XH_JST_CONN_2POS_TOP",        "2PIN_CONN",                          "",                                                                              "", "", "",        ""),
            array("1", "XH_JST_CONN_3POS_SIDE_SMT",   "XH_JST_CONN_3POS_SIDE_SMT",   "XH_JST_CONN_3POS_SIDE_SMT",   "IR_CONNECT",                         "",                                                                              "", "", "",        ""),
            array("2", "YELLOW",                      "LEDCHIPLED_0603",             "CHIPLED_0603",                "RX, TX",                             "LED",                                                                           "", "", "",        "")
        );
        $this->runImport('./APITest/V1/Service/files/malformed.csv', true, ',', $headers, $data);
    }

    public function testImportNoTitle() {
        $headers = null;
        $data  = array(
            array("2", "",                            "M03PTH",                      "1X03",                        "MODULE1_PWR, MODULE2_PWR",           "Header 3",                                                                      "", "", "",        "", ""),
            array("2", "",                            "M04PTH",                      "1X04",                        "MODULE1_SENSE, MODULE2_SENSE",       "Header 4",                                                                      "", "", "",        "", ""),
            array("“2”", "”0.022u\"",                 "C-USC0805",                   "C0805",                       "C12",                                "CAPACITOR, American symbol",                                                    "", "", "",        "", ""),
            array("1", "1.0u",                        "C-USC1210",                   "C1210",                       "C10",                                "CAPACITOR, American symbol",                                                    "", "", "",        "", ""),
            array("7", "100n",                        "C-EUC0603",                   "C0603-ROUND",                 "C1, C2, C6, C9, C13, C15, C22",      "CAPACITOR, European symbol",                                                    "", "", "",        "", ""),
            array("1", "10K",                         "4R-NCAY16",                   "CAY16",                       "RN1",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown", ""),
            array("1", "10uF",                        "CPOL-EUSMCB",                 "SMC_B",                       "C8",                                 "POLARIZED CAPACITOR, European symbol",                                          "", "", "",        "", ""),
            array("1", "10x1",                        "PINHD-1X10",                  "1X10",                        "JP1",                                "PIN HEADER",                                                                    "", "", "",        "", ""),
            array("1", "16MHz",                       "XTAL_THRU_SMD",               "XTAL_THRU_SMT",               "X1",                                 "",                                                                              "", "", "",        "", ""),
            array("1", "1K",                          "4R-NCAY16",                   "CAY16",                       "RN2",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown", ""),
            array("1", "1M",                          "RESISTOR0805-RES",            "0805",                        "R1",                                 "Resistor",                                                                      "", "", "",        "", ""),
            array("2", "1u",                          "C-EUC0603",                   "C0603-ROUND",                 "C11, C14",                           "CAPACITOR, European symbol",                                                    "", "", "",        "", ""),
            array("2", "1uF",                         "C-EUC0603",                   "C0603-ROUND",                 "C5, C7",                             "CAPACITOR, European symbol",                                                    "", "", "",        "", ""),
            array("1", "22R",                         "4R-NCAY16",                   "CAY16",                       "RN3",                                "Array Chip Resistor",                                                           "", "", "unknown", "unknown", ""),
            array("2", "22p",                         "C-EUC0603",                   "C0603-ROUND",                 "C3, C4",                             "CAPACITOR, European symbol",                                                    "", "", "",        "", ""),
            array("2", "237",                         "R-US_R0603",                  "R0603",                       "R4, R7",                             "RESISTOR, American symbol",                                                     "", "", "",        "", ""),
            array("1", "270m",                        "R-US_R0805",                  "R0805",                       "R9",                                 "RESISTOR, American symbol",                                                     "", "", "",        "", ""),
            array("1", "2x1",                         "M023.5MM",                    "SCREWTERMINAL-3.5MM-2",       "PWR_EXP",                            "Header 2",                                                                      "", "", "",        "", ""),
            array("1", "316K",                        "R-EU_R0603",                  "R0603-ROUND",                 "R8",                                 "RESISTOR, European symbol",                                                     "", "", "",        "", ""),
            array("2", "47u",                         "CAP-ELECTRO-C",               "ELECTRO-SMD-C-6MM",           "CP1, CP2",                           "Electrolytic Capacitors,Tantalum Capacitors and Super Capacitors",              "", "", "",        "", ""),
            array("1", "4x1",                         "M04LONGPADS",                 "1X04_LONGPADS",               "LED_EXP",                            "Header 4",                                                                      "", "", "",        "", ""),
            array("4", "53.6",                        "R-US_R0603",                  "R0603",                       "R2, R3, R5, R6",                     "RESISTOR, American symbol",                                                     "", "", "",        "", ""),
            array("1", "6x1",                         "PINHD-1X6",                   "1X06",                        "JP4",                                "PIN HEADER",                                                                    "", "", "",        "", ""),
            array("2", "8x1",                         "PINHD-1X8",                   "1X08",                        "JP2, JP3",                           "PIN HEADER",                                                                    "", "", "",        "", ""),
            array("1", "ALLEGRO_A6210",               "ALLEGRO_A6210",               "ALLEGRO_A6210",               "U4",                                 "",                                                                              "", "", "",        "", ""),
            array("1", "ATMEGA32U4-XUAU",             "ATMEGA32U4-XUAU",             "TQFP44-PAD",                  "U1",                                 "",                                                                              "", "", "",        "", ""),
            array("1", "ATMEGA32U4-XUMU",             "ATMEGA32U4-XUMU",             "QFN44ML7X7",                  "U2",                                 "",                                                                              "", "", "",        "", ""),
            array("1", "CD1206-S01575",               "DIODE-MINIMELF",              "MINIMELF",                    "D2",                                 "DIODE",                                                                         "", "", "",        "", ""),
            array("2", "COMAX_MINISWITCH",            "COMAX_MINISWITCH",            "COMAX_MINISWITCH",            "RST, RST1",                          "",                                                                              "", "", "",        "", ""),
            array("1", "FDN340P",                     "PMOSSOT23",                   "SOT-23",                      "T1",                                 "MOS FET",                                                                       "", "", "unknown", "unknown", ""),
            array("1", "GREEN",                       "LEDCHIPLED_0603",             "CHIPLED_0603",                "ON",                                 "LED",                                                                           "", "", "",        "", ""),
            array("6", "HANGZHOU_MULTICOLOR_3535WSA", "HANGZHOU_MULTICOLOR_3535WSA", "HANGZHOU_MULTCOLOR_3535WSZ",  "RGB1, RGB2, RGB3, RGB4, RGB5, RGB6", "",                                                                              "", "", "",        "", ""),
            array("1", "ICSP",                        "PINHD-2X3",                   "2X03",                        "ICSP",                               "PIN HEADER",                                                                    "", "", "",        "", ""),
            array("1", "LMV358MMX",                   "LMV358MMX",                   "MSOP08",                      "IC2",                                "Dual General Purpose, Low Voltage, Rail-to-Rail Output Operational Amplifiers", "", "", "",        "", ""),
            array("1", "LP2985-XXDBVR33",             "LP2985-XXDBVR33",             "SOT23-DBV",                   "U3",                                 "ULTRALOW-POWER 50-mA LOW-DROPOUT LINEAR REGULATORS",                            "", "", "",        "", ""),
            array("1", "M7",                          "DIODE-SMB",                   "SMB",                         "D1",                                 "DIODE",                                                                         "", "", "",        "", ""),
            array("1", "MC33269ST-3.3T3",             "MC33269ST-3.3T3",             "SOT223",                      "IC1",                                "Adjustable Output Low Dropout Voltage Regulator 800 mA",                        "", "", "",        "", ""),
            array("1", "MF-MSMF050-2 500mA",          "L-EUL1812",                   "L1812",                       "F1",                                 "INDUCTOR, European symbol",                                                     "", "", "",        "", ""),
            array("2", "MH2029-300Y",                 "WE-CBF_0805",                 "0805",                        "L1, L2",                             "SMD EMI Suppression Ferrite Beads",                                             "", "", "",        "", ""),
            array("1", "MOLEX_VERT_MINIUSB",          "MOLEX_VERT_MINIUSB",          "MOLEX_VERT_MINIUSB",          "J1",                                 "",                                                                              "", "", "",        "", ""),
            array("2", "NM",                          "R_0402_NM",                   "R0402_NM",                    "R10, R11",                           "",                                                                              "", "", "",        "", ""),
            array("1", "SCHOTTKY",                    "SCHOTTKY-DIODESMD",           "SMB",                         "D3",                                 "Schottky Diode",                                                                "", "", "",        "", ""),
            array("3", "SI2302DS_MOSFET",             "SI2302DS_MOSFET",             "SI2302DS_MOSFET",             "TBLUE, TGREEN, TRED",                "",                                                                              "", "", "",        "", ""),
            array("1", "TAIYO_YUDEN_6045_INDUCTOR",   "TAIYO_YUDEN_6045_INDUCTOR",   "TAIYO_YUDEN_6045_INDUCTOR",   "I_LEDDRIVER",                        "",                                                                              "", "", "",        "", ""),
            array("2", "VARISTORCN0603",              "VARISTORCN0603",              "CT/CN0603",                   "Z1, Z2",                             "VARISTOR",                                                                      "", "", "",        "", ""),
            array("1", "VERT_PWRJACK_PJ-006A_CUIINC", "VERT_PWRJACK_PJ-006A_CUIINC", "VERT_PWRJACK_PJ-006A_CUIINC", "PWR_JACK",                           "",                                                                              "", "", "",        "", ""),
            array("1", "XH_JST_CONN_2POS_TOP",        "XH_JST_CONN_2POS_TOP",        "XH_JST_CONN_2POS_TOP",        "2PIN_CONN",                          "",                                                                              "", "", "",        "", ""),
            array("1", "XH_JST_CONN_3POS_SIDE_SMT",   "XH_JST_CONN_3POS_SIDE_SMT",   "XH_JST_CONN_3POS_SIDE_SMT",   "IR_CONNECT",                         "",                                                                              "", "", "",        "", ""),
            array("2", "YELLOW",                      "LEDCHIPLED_0603",             "CHIPLED_0603",                "RX, TX",                             "LED",                                                                           "", "", "",        "", "")
        );
        $this->runImport('./APITest/V1/Service/files/no_title.csv', true, ',', $headers, $data);
    }

    public function testImportEmpty() {
        $headers = array();
        $data  = array();
        $this->runImport('./APITest/V1/Service/files/empty.csv', true, null, $headers, $data);
    }

    public function testImportNoData() {
        $headers = array(
            'Qty',
            'Value',
            'Device',
            'Package',
            'Parts',
            'Description',
            'MF',
            'MPN',
            'OC_FARNELL',
            'OC_NEWARK');

        $data  = array();
        $this->runImport('./APITest/V1/Service/files/no_data.csv', true, null, $headers, $data);
    }

    public function testImportSingleColumn() {
        $headers = array();
        $data  = array();
        $this->runImport('./APITest/V1/Service/files/single_column.csv', true, null, $headers, $data);
    }

    public function testImportAmbiguous() {
        $headers = array();
        $data  = array();
        $this->runImport('./APITest/V1/Service/files/ambiguous.csv', false, null, $headers, $data);
    }

    public function tearDown() {
        parent::tearDown();
    }
}
